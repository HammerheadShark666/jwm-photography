function v(n,t){$("#model-message-title").text(n);$("#model-message").text(t);a.show()}function n(n,t){return e(f.post(n,t))}function p(n){return e(f.delete(n))}function e(n){return n.then(n=>(console.log(n),n)).catch(n=>{console.error(n);throw n;})}function i(n){$(n).each(function(){$(this).delay(Math.random()*500+100).fadeTo("slow",1)})}function tt(n){switch(n){case 0:return"alert-danger";case 1:return"alert-warning";case 2:return"alert-info"}}function it(n,t){$(t).append('<div class="alert '+tt(n.severity)+'" role="alert">'+n.text+"<\/div >")}function o(n){document.querySelectorAll(n).forEach(function(n){n.addEventListener("click",function(n){n.stopPropagation()})})}function ut(){var n=$("#user-galleries"),t=$("li",n).get(),r=t[0],i;t.shift();i=k(t);i.splice(0,0,r);n=s(n,i)}function ft(){var n=$(".site-galleries"),t=$("li.site-gallery-menu-item",n),i=$("li.user-gallery-menu-item",n),r=$("li.seperator",n),u=k(i),n=s(n,t);n.append(r);n=s(n,u)}function k(n){return n.sort(function(n,t){var i=$(n).text().trim().toUpperCase(),r=$(t).text().trim().toUpperCase();return i<r?-1:1}),n}function s(n,t){return $.each(t,function(t,i){n.append(i)}),n}function c(n,i,r){n.preventDefault();h=i;t=r;document.getElementById("context-menu").style.display=="block"?g():et(n)}function et(n){var t=document.getElementById("context-menu");t.style.display="block";t.style.left=n.pageX+"px";t.style.top=n.pageY+"px"}function g(){document.getElementById("context-menu").style.display="none"}function ot(){let n=$(t).attr("id");d.addPhotoToGallerys(n).then(function(){$(t).parent().append("<img class='home-image-favourite' src='/images/icons8-orange-heart-48.png' class='like-icon'>");$(".home-image-favourite").delay(Math.random()*500+100).fadeTo("slow",1)}).catch(()=>{v("Gallerys","Photo failed to be added to favourites.")})}function st(){let n=$(t).attr("id");d.deletePhotoFromGallerys(n).then(function(){$(t).closest("img").remove()}).catch(()=>{v("Gallerys","Photo failed to be deleted from favourites.")})}class nt{getPhotos(t){let i={pageSize:t.pageSize,pageIndex:t.pageIndex,sortField:t.sortField===undefined?"":t.sortField,sortOrder:t.sortOrder===undefined?"":t.sortOrder,title:t.title,countryId:t.country.id,categoryId:t.category.id,paletteId:t.palette.id,aperturValue:t.aperturValue,camera:t.camera,dateTaken:t.dateTaken,exposureTime:t.exposureTime,fileName:t.fileName,focalLength:t.focalLength,id:t.id===undefined?0:t.id,iso:t.iso===undefined?0:t.iso,lens:t.lens};return new Promise(function(t,r){n("/admin/photo/catalog",i).then(function(n){return t(n)}).catch(n=>r(n))})}savePhotoDetails(t,i,r,u,f){const e={id:t,title:i,countryId:r,categoryId:u,paletteId:f};return new Promise(function(t,i){n("/admin/photo/catalog/update-photo",e).then(function(n){return t(n)}).catch(n=>i(n))})}addPhotoToGallerys(t){return new Promise(function(i,r){n("/favourites/add-photo/"+t).then(function(n){return i(n)}).catch(n=>r(n))})}deletePhotoFromGallerys(n){return new Promise(function(t,i){p("/favourites/delete-photo/"+n).then(function(n){return t(n)}).catch(n=>i(n))})}importPhotos(t){return new Promise(function(i,r){n("/admin/photo/import",t).then(function(n){return i(n)}).catch(n=>r(n))})}updateCataloguePhoto(t){return new Promise(function(i,r){n("/admin/photo/catalog/update-photo",t).then(function(n){return i(n)}).catch(n=>r(n))})}}class l{searchPhotos(t,i,r,u,f,e){let o=this.filter(t,i,r,u,f,e);return new Promise(function(t,i){n("/favourites/search",o).then(function(n){return t(n)}).catch(n=>i(n))})}savePhotoToUserGallery(t,i,r){let u=this.photo(t,i,r);return new Promise(function(t,i){n("/user/gallery-photos/add",u).then(function(n){return t(n)}).catch(n=>i(n))})}movePhotoInUserGallery(t,i,r){let u=this.photo(t,i,r);return new Promise(function(t,i){n("/user/gallery-photos/move",u).then(function(n){return t(n)}).catch(n=>i(n))})}removePhotoInUserGallery(t,i,r){let u=this.photo(t,i,r);return new Promise(function(t,i){n("/user/gallery-photos/remove",u).then(function(n){return t(n)}).catch(n=>i(n))})}saveUserGalleryName(t,i){let r=this.userGallery(t,i),u="/user/gallery/"+(t==0?"add":"update");return new Promise(function(t,i){n(u,r).then(function(n){return t(n)}).catch(n=>i(n))})}saveNewUserGallery(t){let i=this.userGallery(0,t);return new Promise(function(t,r){n("/user/gallery/add",i).then(function(n){return t(n)}).catch(n=>r(n))})}deleteUserGallery(n){return new Promise(function(t,i){p("/user/gallery/delete/"+n).then(function(n){return t(n)}).catch(n=>i(n))})}photo(n,t,i){return{userGalleryId:n,photoId:t,order:i}}userGallery(n,t){return{id:n,name:t}}filter(n,t,i,r,u,f){return{title:n,countryId:parseInt(t),categoryId:parseInt(i),paletteId:parseInt(r),pageIndex:parseInt(u),pageSize:parseInt(f)}}}let a;document.addEventListener("DOMContentLoaded",function(){a=new bootstrap.Modal(document.getElementById("modal-message-popup"),{keyboard:!1})});const y="https://"+window.location.host,f=axios.create({baseURL:y,headers:{RequestVerificationToken:$('input[name="__RequestVerificationToken"]').val()}});const rt=new l;let r=$("#add-user-gallery-name-alerts"),w=$("#new-user-gallery-name"),b=$("#new-user-gallery-modal"),u=$("nav ul li");$(function(){r.empty()});document.addEventListener("DOMContentLoaded",function(){o(".site-galleries");o(".user-galleries");o(".new-gallery-item")});$("#menu-bar li a").click(function(){var n=$(this).attr("id");u.find("ul.item-show-"+n).toggleClass("show");u.find("#"+n+" span").toggleClass("rotate")});u.click(function(){u.removeClass("active");$(this).addClass("active")});$(document).on("click","#new-user-gallery",function(){b.modal("show");w.val("");r.empty()});$(document).on("click","#save-user-new-gallery",function(){let n=w.val();r.empty();n!=""&&rt.saveNewUserGallery(n).then(function(n){b.modal("hide");$("#user-galleries").append("<li><a href='/user/gallery/"+n.data.id+"'>"+n.data.name+"<\/a><\/li>");$(".site-galleries").append("<li class='user-gallery-menu-item' data-user-gallary-menu-id='"+n.data.id+"'><a class='dropdown-item' href='/gallery/user/"+n.data.id+"'>"+n.data.name+"<\/a><\/li>");ut();ft();window.location=y+"/user/gallery/"+n.data.id}).catch(n=>{n.response.data.messages.forEach(function(n){it(n,r)})})});$(document).ready(function(){i($("#favourites-images > a > img"))});const d=new nt;let h="",t;$(document).ready(function(){document.onclick=g});$(document).on("contextmenu","#favourites-images img",function(n){c(n,"deletePhotoFromGallerys",n.target)});$(document).on("contextmenu",".image-list li",function(n){let t=$(n.currentTarget).find(".home-image-container").find(".home-image-favourite").length>0;t||c(n,"addPhotoToGallerys",n.target)});$(document).on("contextmenu","#gallery-images div img",function(n){let t=$(n.currentTarget).closest(".gallery-image-container").find(".gallery-image-favourite").length>0;t||c(n,"addPhotoToGallerys",n.target)});$("#context-menu ul li").on("click",function(n){n.preventDefault();h=="addPhotoToGallerys"?ot():h=="deletePhotoFromGallerys"&&st()});$(function(){i($("#gallery-images > div > a > img"));i($(".gallery-image-favourite"));i($("#user-gallery-images > div > a > img"))});export{l as UserGallery};