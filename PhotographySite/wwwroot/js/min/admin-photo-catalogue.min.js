function get(n){return getRequest(axiosClient.get(n))}function post(n,t){return getRequest(axiosClient.post(n,t))}function deletion(n){return getRequest(axiosClient.delete(n))}function getRequest(n){return n.then(n=>(console.log(n),n)).catch(n=>{console.error(n);throw n;})}function setModal(n,t){$("#photo-modal-label").text(n);$("#imagePreview").attr({src:t});$("#photo-modal").modal("show")}function fadeInImages(n){$(n).each(function(){$(this).delay(Math.random()*500+100).fadeTo("slow",1)})}function getAlertClass(n){switch(n){case 0:return"alert-danger";case 1:return"alert-warning";case 2:return"alert-info"}}function addAlert(n,t){$(t).append('<div class="alert '+getAlertClass(n.severity)+'" role="alert">'+n.text+"<\/div >")}function stopClickEventPropagation(n){document.querySelectorAll(n).forEach(function(n){n.addEventListener("click",function(n){n.stopPropagation()})})}function setAdminMenuItem(n,t){const r=$("#selected-gallery-id").val(),i=$("nav ul li");i.find("a").removeClass("active-menu-item");t===0&&(t=n);n===3&&(t="3."+r);$('[data-menu-level-index="'+t+'"] a').addClass("active-menu-item");i.find("ul.item-show-"+n).toggleClass("show");i.find("#"+n+" span").toggleClass("rotate")}function selectMenuItem(){const n=new URLSearchParams(window.location.search).get("menu");n==="galleries"&&$('.menu li a[id="2"]').click()}function initialisePhotosCatalogueResultsPagination(n,t){photoCatalogueResultsPagination.pagination({items:n,itemsOnPage:pageSize,cssStyle:"dark-theme",onPageClick:function(n){cataloguePhotosGrid.jsGrid("openPage",n)}});showPaginationController(t)}function showPaginationController(n){n?photoCatalogueResultsPagination.show():photoCatalogueResultsPagination.hide()}function loadLookUps(){return new Promise(function(n,t){lookUp.getPhotoCatalogueLookups().then(function(t){initialisePhotoCatalogLookupArrays(t.data);n()}).catch(n=>{n.response.data.messages.forEach(function(n){addAlert(n,photoCatalogueAlerts)}),t()})})}function initialisePhotoCatalogLookupArrays(n){countries=initialiseLookupsArray(n.countries);categories=initialiseLookupsArray(n.categories);palettes=initialiseLookupsArray(n.palettes)}function initialiseLookupsArray(n){return n.push({id:0,name:""}),sortLookupArray(n)}function sortLookupArray(n){return n.sort((n,t)=>n.name<t.name?-1:n.name>t.name?1:0),n}function intialisePhotoCatalogGrid(){cataloguePhotosGrid.jsGrid({width:"100%",autoload:!0,editing:!0,sorting:!0,filtering:!0,pageLoading:!0,pageSize:10,pageIndex:1,controller:{loadData:function(n){return loadPhotos(n)},updateItem:function(n){return updatePhotoDetails(n)}},noDataContent:"No Photos Found",loadIndication:!0,loadIndicationDelay:500,loadMessage:"Please, wait...",loadShading:!0,fields:photosCatalogueFields()})}function loadPhotos(n){let t=n.pageIndex;return photoCatalogueAlerts.empty(),$("#photos-catalogue-results-pagination").hide(),photo.getPhotos(n).then(function(n){return n.data.itemsCount>0&&(initialisePhotosCatalogueResultsPagination(n.data.itemsCount,!0),photoCatalogueResultsPagination.pagination("drawPage",t)),azureStoragePhotosContainerUrl=n.data.azureStoragePhotosContainerUrl,n.data}).catch(function(n){n.response.data.messages.forEach(function(n){addAlert(n,photoCatalogueAlerts)})})}function updatePhotoDetails(n){photoCatalogueAlerts.empty();photo.savePhotoDetails(n.id,n.title,n.country.id,n.category.id,n.palette.id).then(function(n){return n}).catch(n=>{n.response.data.messages.forEach(function(n){addAlert(n,photoCatalogueAlerts)})})}function photosCatalogueFields(){return[{name:"fileName",width:83,title:"",itemTemplate:function(n,t){return $("<img>").attr({src:azureStoragePhotosContainerUrl+t.fileName}).css({width:"100%"}).on("click",function(){setModal(t.fileName,azureStoragePhotosContainerUrl+t.fileName)})}},{name:"id",title:"ID",type:"number",visible:!1,editing:!1},{name:"fileName",title:"Filename",type:"text",width:120,editing:!1},{name:"title",title:"Title",type:"text",width:180},{name:"country.id",title:"Country",type:"select",width:100,items:countries,valueField:"id",textField:"name",align:"left"},{name:"category.id",title:"Category",type:"select",width:100,items:categories,valueField:"id",textField:"name",align:"left"},{name:"palette.id",title:"Palette",type:"select",width:100,items:palettes,valueField:"id",textField:"name",align:"left"},{type:"control",deleteButton:!1,editButton:!1},{name:"camera",title:"Camera",type:"text",width:100,editing:!1},{name:"lens",title:"Lens",type:"text",width:130,editing:!1},{name:"focalLength",title:"Focal Length",type:"text",width:60,editing:!1},{name:"exposureTime",title:"Exposure",type:"text",width:70,editing:!1},{name:"aperturValue",title:"Aperture",type:"text",width:60,editing:!1},{name:"iso",title:"ISO",type:"number",width:70,editing:!1,itemTemplate:function(n){return n===0?"":n}},{name:"dateTaken",title:"Date Taken",type:"text",width:80,editing:!1,itemTemplate:function(n){if(n!=null)return new Date(n).toLocaleDateString()}},]}(function(n){var t={init:function(i){var r=n.extend({items:1,itemsOnPage:1,pages:0,displayedPages:5,edges:2,currentPage:0,useAnchors:!0,hrefTextPrefix:"#page-",hrefTextSuffix:"",prevText:"Prev",nextText:"Next",ellipseText:"&hellip;",ellipsePageSet:!0,cssStyle:"light-theme",listStyle:"",labelMap:[],selectOnClick:!0,nextAtFront:!1,invertPageOrder:!1,useStartEdge:!0,useEndEdge:!0,onPageClick:function(){},onInit:function(){}},i||{}),u=this;return r.pages=r.pages?r.pages:Math.ceil(r.items/r.itemsOnPage)?Math.ceil(r.items/r.itemsOnPage):1,r.currentPage=r.currentPage?r.currentPage-1:r.invertPageOrder?r.pages-1:0,r.halfDisplayed=r.displayedPages/2,this.each(function(){u.addClass(r.cssStyle+" simple-pagination").data("pagination",r);t._draw.call(u)}),r.onInit(),this},selectPage:function(n){return t._selectPage.call(this,n-1),this},prevPage:function(){var n=this.data("pagination");return n.invertPageOrder?n.currentPage<n.pages-1&&t._selectPage.call(this,n.currentPage+1):n.currentPage>0&&t._selectPage.call(this,n.currentPage-1),this},nextPage:function(){var n=this.data("pagination");return n.invertPageOrder?n.currentPage>0&&t._selectPage.call(this,n.currentPage-1):n.currentPage<n.pages-1&&t._selectPage.call(this,n.currentPage+1),this},getPagesCount:function(){return this.data("pagination").pages},setPagesCount:function(n){this.data("pagination").pages=n},getCurrentPage:function(){return this.data("pagination").currentPage+1},destroy:function(){return this.empty(),this},drawPage:function(n){var i=this.data("pagination");return i.currentPage=n-1,this.data("pagination",i),t._draw.call(this),this},redraw:function(){return t._draw.call(this),this},disable:function(){var n=this.data("pagination");return n.disabled=!0,this.data("pagination",n),t._draw.call(this),this},enable:function(){var n=this.data("pagination");return n.disabled=!1,this.data("pagination",n),t._draw.call(this),this},updateItems:function(n){var i=this.data("pagination");i.items=n;i.pages=t._getPages(i);this.data("pagination",i);t._draw.call(this)},updateItemsOnPage:function(n){var i=this.data("pagination");return i.itemsOnPage=n,i.pages=t._getPages(i),this.data("pagination",i),t._selectPage.call(this,0),this},getItemsOnPage:function(){return this.data("pagination").itemsOnPage},_draw:function(){var i=this.data("pagination"),r=t._getInterval(i),u,s,f,o,e;if(t.destroy.call(this),s=typeof this.prop=="function"?this.prop("tagName"):this.attr("tagName"),f=s==="UL"?this:n("<ul"+(i.listStyle?' class="'+i.listStyle+'"':"")+"><\/ul>").appendTo(this),i.prevText&&t._appendItem.call(this,i.invertPageOrder?i.currentPage+1:i.currentPage-1,{text:i.prevText,classes:"prev"}),i.nextText&&i.nextAtFront&&t._appendItem.call(this,i.invertPageOrder?i.currentPage-1:i.currentPage+1,{text:i.nextText,classes:"next"}),i.invertPageOrder){if(r.end<i.pages&&i.edges>0){if(i.useStartEdge)for(o=Math.max(i.pages-i.edges,r.end),u=i.pages-1;u>=o;u--)t._appendItem.call(this,u);i.pages-i.edges>r.end&&i.pages-i.edges-r.end!=1?f.append('<li class="disabled"><span class="ellipse">'+i.ellipseText+"<\/span><\/li>"):i.pages-i.edges-r.end==1&&t._appendItem.call(this,r.end)}}else if(r.start>0&&i.edges>0){if(i.useStartEdge)for(e=Math.min(i.edges,r.start),u=0;u<e;u++)t._appendItem.call(this,u);i.edges<r.start&&r.start-i.edges!=1?f.append('<li class="disabled"><span class="ellipse">'+i.ellipseText+"<\/span><\/li>"):r.start-i.edges==1&&t._appendItem.call(this,i.edges)}if(i.invertPageOrder)for(u=r.end-1;u>=r.start;u--)t._appendItem.call(this,u);else for(u=r.start;u<r.end;u++)t._appendItem.call(this,u);if(i.invertPageOrder){if(r.start>0&&i.edges>0&&(i.edges<r.start&&r.start-i.edges!=1?f.append('<li class="disabled"><span class="ellipse">'+i.ellipseText+"<\/span><\/li>"):r.start-i.edges==1&&t._appendItem.call(this,i.edges),i.useEndEdge))for(e=Math.min(i.edges,r.start),u=e-1;u>=0;u--)t._appendItem.call(this,u)}else if(r.end<i.pages&&i.edges>0&&(i.pages-i.edges>r.end&&i.pages-i.edges-r.end!=1?f.append('<li class="disabled"><span class="ellipse">'+i.ellipseText+"<\/span><\/li>"):i.pages-i.edges-r.end==1&&t._appendItem.call(this,r.end),i.useEndEdge))for(o=Math.max(i.pages-i.edges,r.end),u=o;u<i.pages;u++)t._appendItem.call(this,u);i.nextText&&!i.nextAtFront&&t._appendItem.call(this,i.invertPageOrder?i.currentPage-1:i.currentPage+1,{text:i.nextText,classes:"next"});i.ellipsePageSet&&!i.disabled&&t._ellipseClick.call(this,f)},_getPages:function(n){var t=Math.ceil(n.items/n.itemsOnPage);return t||1},_getInterval:function(n){return{start:Math.ceil(n.currentPage>n.halfDisplayed?Math.max(Math.min(n.currentPage-n.halfDisplayed,n.pages-n.displayedPages),0):0),end:Math.ceil(n.currentPage>n.halfDisplayed?Math.min(n.currentPage+n.halfDisplayed,n.pages):Math.min(n.displayedPages,n.pages))}},_appendItem:function(i,r){var s=this,u,e,f=s.data("pagination"),o=n("<li><\/li>"),h=s.find("ul");i=i<0?0:i<f.pages?i:f.pages-1;u={text:i+1,classes:""};f.labelMap.length&&f.labelMap[i]&&(u.text=f.labelMap[i]);u=n.extend(u,r||{});i==f.currentPage||f.disabled?(f.disabled||u.classes==="prev"||u.classes==="next"?o.addClass("disabled"):o.addClass("active"),e=n('<span class="current">'+u.text+"<\/span>")):(e=f.useAnchors?n('<a href="'+f.hrefTextPrefix+(i+1)+f.hrefTextSuffix+'" class="page-link">'+u.text+"<\/a>"):n("<span >"+u.text+"<\/span>"),e.click(function(n){return t._selectPage.call(s,i,n)}));u.classes&&e.addClass(u.classes);o.append(e);h.length?h.append(o):s.append(o)},_selectPage:function(n,i){var r=this.data("pagination");r.currentPage=n;r.selectOnClick&&t._draw.call(this);return r.onPageClick(n+1,i)},_ellipseClick:function(i){var f=this,r=this.data("pagination"),u=i.find(".ellipse");u.addClass("clickable").parent().removeClass("disabled");u.click(function(){if(!r.disable){var i=n(this),e=(parseInt(i.parent().prev().text(),10)||0)+1;i.html('<input type="number" min="1" max="'+r.pages+'" step="1" value="'+e+'">').find("input").focus().click(function(n){n.stopPropagation()}).keyup(function(i){var e=n(this).val();i.which===13&&e!==""?e>0&&e<=r.pages&&t._selectPage.call(f,e-1):i.which===27&&u.empty().html(r.ellipseText)}).bind("blur",function(){var i=n(this).val();return i!==""&&t._selectPage.call(f,i-1),u.empty().html(r.ellipseText),!1})}return!1})}};n.fn.pagination=function(i){if(t[i]&&i.charAt(0)!="_")return t[i].apply(this,Array.prototype.slice.call(arguments,1));if(typeof i!="object"&&i)n.error("Method "+i+" does not exist on jQuery.pagination");else return t.init.apply(this,arguments)}})(jQuery);const baseUrl="https://"+window.location.host,axiosClient=axios.create({baseURL:baseUrl,headers:{RequestVerificationToken:$('input[name="__RequestVerificationToken"]').val()}});(function(n,t,i,r){function s(t,i){jQuery.extend(this,{Obj:t,_name:o,_defaults:n.fn.lightboxed.defaults,options:jQuery.extend({},n.fn.lightboxed.defaults,i),uniq:"id"+(new Date).getTime(),lightbox:{},cache:{},index:!1,touch:{},phantoms:{left:!1,right:!1}});this.init()}function f(n){return{clientX:/touch/.test(n.type)?(n.originalEvent||n).changedTouches[0].clientX:n.clientX,clientY:/touch/.test(n.type)?(n.originalEvent||n).changedTouches[0].clientY:n.clientY,pageX:/touch/.test(n.type)?(n.originalEvent||n).changedTouches[0].pageX:n.pageX,pageY:/touch/.test(n.type)?(n.originalEvent||n).changedTouches[0].pageY:n.pageY,timestamp:Date.now()}}function e(n){n=n||t.event;n.preventDefault&&n.preventDefault();n.returnValue=!1}function h(n){if({37:1,38:1,39:1,40:1}[n.keyCode])return e(n),!1}function c(){t.addEventListener&&t.addEventListener("DOMMouseScroll",e,!1);t.onwheel=e;t.onmousewheel=i.onmousewheel=e;t.ontouchmove=e;i.onkeydown=h}function l(){t.removeEventListener&&t.removeEventListener("DOMMouseScroll",e,!1);t.onmousewheel=i.onmousewheel=null;t.onwheel=null;t.ontouchmove=null;i.onkeydown=null}var o="Lightboxed",u="lightboxed--";n.extend(s.prototype,{init:function(){var n=this;this.CacheObj=jQuery(i).find("#"+u+"cache").length>0?jQuery(i).find("#"+u+"cache"):jQuery('<div id="'+u+'cache" />').appendTo("body");this.cache.container=jQuery('<div id="'+this.uniq+'" />').appendTo(this.CacheObj);this.cache.content=jQuery('<div class="'+u+'cached_content" />').appendTo(this.cache.container);this.Obj.length>1&&(this.cache.thumbs=jQuery('<div class="'+u+'cached_thumbs" />').appendTo(this.cache.container));this.Obj.each(function(){n.addToCache(this)});this.lightbox.container=jQuery(i).find("#"+u+"container").length>0?jQuery(i).find("#"+u+"container"):jQuery('<div id="'+u+'container" />').addClass(this.options.lightboxCloseClass).appendTo("body");this.lightbox.stage=this.lightbox.container.find("#"+u+"stage").length>0?this.lightbox.container.find("#"+u+"stage"):jQuery('<div id="'+u+'stage" />').appendTo(this.lightbox.container);this.lightbox.content=this.lightbox.stage.find("#"+u+"content").length>0?this.lightbox.stage.find("#"+u+"content"):jQuery('<div id="'+u+'content" />').appendTo(this.lightbox.stage);this.lightbox.thumbs=this.lightbox.container.find("#"+u+"thumbs").length>0?this.lightbox.container.find("#"+u+"thumbs"):jQuery('<div id="'+u+'thumbs" />').appendTo(this.lightbox.stage);this.lightbox.close=this.lightbox.container.find("#"+u+"bttn_close").length>0?this.lightbox.container.find("#"+u+"bttn_close"):jQuery('<div id="'+u+'bttn_close" />').appendTo(this.lightbox.container);this.lightbox.prev=this.lightbox.container.find("#"+u+"bttn_prev").length>0?this.lightbox.container.find("#"+u+"bttn_prev"):jQuery('<div id="'+u+'bttn_prev" />').appendTo(this.lightbox.container);this.lightbox.next=this.lightbox.container.find("#"+u+"bttn_next").length>0?this.lightbox.container.find("#"+u+"bttn_next"):jQuery('<div id="'+u+'bttn_next" />').appendTo(this.lightbox.container);this.registerEvents("init")},addToCache:function(n){var t;t=(jQuery(n).attr("data-link")||jQuery(n).attr("href")||jQuery(n).attr("data-src")||jQuery(n).attr("src")).match("jpg|gif|png|JPG|GIF|PNG|JPEG|jpeg|svg|SVG|tif|TIF|bmp|BMP")?jQuery("<img />").attr("src",jQuery(n).attr("data-link")||jQuery(n).attr("href")||jQuery(n).attr("src")).attr("alt",jQuery(n).attr("alt")).attr("data-caption",jQuery(n).attr("data-caption")):(jQuery(n).attr("data-link")||jQuery(n).attr("href")).match("^#")&&jQuery(jQuery(n).attr("data-link")||jQuery(n).attr("href")).length>0?jQuery(jQuery(n).attr("data-link")||jQuery(n).attr("href")).html():jQuery("<iframe />").attr("src",jQuery(n).attr("data-link")||jQuery(n).attr("href")).attr("width",jQuery(n).attr("data-width")).attr("height",jQuery(n).attr("data-height")).attr("allowfullscreen","true");jQuery('<div class="'+u+'frame" />').append(t).append(jQuery(n).attr("data-caption")!==r?jQuery('<div class="'+u+'caption" />').html(jQuery(n).attr("data-caption")):"").appendTo(this.cache.content);this.Obj.length>1&&jQuery('<div class="'+u+'thumb" />').append(jQuery('<div class="'+u+'thumb_border" />').append(jQuery("<img />").attr("src",jQuery(n).attr("data-src")||jQuery(n).attr("src")||jQuery(n).attr("data-link")||jQuery(n).attr("href")))).appendTo(this.cache.thumbs)},resizeContent:function(){var n=this;this.lightbox.content.width(jQuery(t).width()*this.lightbox.content.children().length).height(this.cache.thumbs?jQuery(t).height()-this.lightbox.thumbs.height():jQuery(t).height()).children().width(jQuery(t).width()-2*this.options.content.spacing).height(this.lightbox.content.height());this.lightbox.content.children().each(function(i){jQuery(this).css("left",jQuery(t).width()*i+n.options.content.spacing)})},open:function(n,t){var i=this;this.cache.thumbs&&this.options.thumbs!==!1&&(this.lightbox.thumbs.width((this.options.thumbs.size+this.options.thumbs.spacing)*this.cache.thumbs.children().length).height(this.options.thumbs.size+2*this.options.thumbs.spacing).html(this.cache.thumbs.clone(!0).html()).show().children().width(this.options.thumbs.size).height(this.options.thumbs.size).css("margin",this.options.thumbs.spacing+"px "+this.options.thumbs.spacing/2+"px"),this.registerEvents("thumbs"),this.lightbox.next.show(),this.lightbox.prev.show());this.lightbox.content.html(this.cache.content.clone(!0).html());this.lightbox.content.children().length>1&&this.options.loop==!0&&(this.phantoms={left:jQuery(this.lightbox.content.children().get(this.lightbox.content.children().length-1)).clone().addClass(u+"phantom-left").prependTo(this.lightbox.content),right:jQuery(this.lightbox.content.children().get(1)).clone().addClass(u+"phantom-right").appendTo(this.lightbox.content)});this.resizeContent();this.change(n,this.Obj.index(t));this.registerEvents("lightbox");this.lightbox.container.toggleClass(this.options.lightboxCloseClass+" "+this.options.lightboxOpenClass).fadeIn(this.options.delay);c()},close:function(){var n=this;this.deregisterEvents();this.lightbox.container.toggleClass(this.options.lightboxCloseClass+" "+this.options.lightboxOpenClass).fadeOut(this.options.delay,function(){n.lightbox.container.attr("style","");n.lightbox.content.html("").attr("style","");n.lightbox.thumbs.html("").attr("style","").hide();n.lightbox.next.hide();n.lightbox.prev.hide();n.index=!1;l()})},change:function(n,i){var e=this,r=typeof i=="number"?i:jQuery(i).index(),f;this.lightbox.content.children().length>1&&(f=this.options.loop===!0?jQuery(t).width()*-(r+1):jQuery(t).width()*-r,this.lightbox.content.css({"-webkit-transform":"translate("+f+"px,0)","-moz-transform":"translate("+f+"px,0)","-ms-transform":"translate("+f+"px,0)","-o-transform":"translate("+f+"px,0)",transform:"translate("+f+"px,0)",transition:this.options.delay+"ms transform"}),r==-1?(r=this.lightbox.content.children().length-3,setTimeout(function(){var n=jQuery(t).width()*-(r+1);e.lightbox.content.css({"-webkit-transform":"translate("+n+"px,0)","-moz-transform":"translate("+n+"px,0)","-ms-transform":"translate("+n+"px,0)","-o-transform":"translate("+n+"px,0)",transform:"translate("+n+"px,0)",transition:"none"})},this.options.delay)):r==this.lightbox.content.children().length-2?(r=0,setTimeout(function(){var n=jQuery(t).width()*-(r+1);e.lightbox.content.css({"-webkit-transform":"translate("+n+"px,0)","-moz-transform":"translate("+n+"px,0)","-ms-transform":"translate("+n+"px,0)","-o-transform":"translate("+n+"px,0)",transform:"translate("+n+"px,0)",transition:"none"})},this.options.delay)):setTimeout(function(){e.lightbox.content.css("transition","none")},this.options.delay),this.lightbox.content.children().removeClass(u+"active"),jQuery(this.lightbox.content.children().get(r+1)).addClass(u+"active"),this.lightbox.thumbs.children().removeClass(u+"active"),jQuery(this.lightbox.thumbs.children().get(r)).addClass(u+"active"),this.lightbox.thumbs.width()>jQuery(t).width()&&(f=-(r*(this.options.thumbs.size+this.options.thumbs.spacing))-(this.options.thumbs.size+this.options.thumbs.spacing)/2,this.lightbox.thumbs.css({"-webkit-transform":"translate("+f+"px,0)","-moz-transform":"translate("+f+"px,0)","-ms-transform":"translate("+f+"px,0)","-o-transform":"translate("+f+"px,0)",transform:"translate("+f+"px,0)",transition:this.options.delay+"ms transform"})));this.index=r},next:function(n){var t=this;this.change(n,this.index+1)},prev:function(n){var t=this;this.change(n,t.index-1)},startTouch:function(n,t){var i=this;n.preventDefault();this.touch={start:f(n),target:{x:parseFloat(t.css("transform").split(",")[4]),y:parseFloat(t.css("transform").split(",")[5])}}},endTouch:function(n,i){var u=this,r;n.preventDefault();r={clientX:f(n).clientX-this.touch.start.clientX,clientY:f(n).clientY-this.touch.start.clientY,pageX:f(n).pageX-this.touch.start.pageX,pageY:f(n).pageY-this.touch.start.pageY,timestamp:f(n).timestamp-this.touch.start.timestamp};i==this.lightbox.content&&((r.clientX>0?r.clientX:-r.clientX)>jQuery(t).width()*this.options.swipe.horizontalOffset?r.clientX>0?this.prev(n):this.next(n):(this.lightbox.content.css({"-webkit-transform":"translate("+this.touch.target.x+"px,0)","-moz-transform":"translate("+this.touch.target.x+"px,0)","-ms-transform":"translate("+this.touch.target.x+"px,0)","-o-transform":"translate("+this.touch.target.x+"px,0)",transform:"translate("+this.touch.target.x+"px,0)",transition:this.options.delay+"ms transform"}),setTimeout(function(){u.lightbox.content.css("transition","none")},this.options.delay)),(r.clientY>0?r.clientY:-r.clientY)>jQuery(t).height()*this.options.swipe.verticalOffset?this.close(n):(this.lightbox.container.css({"-webkit-transform":"translate(0,0) scale(1)","-moz-transform":"translate(0,0) scale(1)","-ms-transform":"translate(0,0) scale(1)","-o-transform":"translate(0,0) scale(1)",transform:"translate(0,0) scale(1)",opacity:"1",transition:this.options.delay+"ms all"}),setTimeout(function(){u.lightbox.container.attr("style","display: block;")},this.options.delay)))},moveTouch:function(n,i){var s=this,r,e,o,u;n.preventDefault();r={clientX:f(n).clientX-this.touch.start.clientX,clientY:f(n).clientY-this.touch.start.clientY,pageX:f(n).pageX-this.touch.start.pageX,pageY:f(n).pageY-this.touch.start.pageY,timestamp:f(n).timestamp-this.touch.start.timestamp};i==this.lightbox.content&&(r.clientX>0?r.clientX:-r.clientX)>10&&(e=this.touch.target.x+r.clientX,i.css({"-webkit-transform":"translate("+e+"px,0)","-moz-transform":"translate("+e+"px,0)","-ms-transform":"translate("+e+"px,0)","-o-transform":"translate("+e+"px,0)",transform:"translate("+e+"px,0)"}));i==this.lightbox.content&&(r.clientY>0?r.clientY:-r.clientY)>30&&(o=0+r.clientY,u=(jQuery(t).height()-(r.clientY>0?r.clientY:-r.clientY))/jQuery(t).height(),this.lightbox.container.css({"-webkit-transform":"translate(0,"+o+"px) scale("+u+")","-moz-transform":"translate(0,"+o+"px) scale("+u+")","-ms-transform":"translate(0,"+o+"px) scale("+u+")","-o-transform":"translate(0,"+o+"px) scale("+u+")",transform:"translate(0,"+o+"px) scale("+u+")",opacity:u}))},registerEvents:function(n){var i=this;if(n=="init"&&this.Obj.each(function(){jQuery(this).on("click",function(n){n.preventDefault();i.open.call(i,n,this)})}),n=="lightbox"){this.lightbox.close.on("click",function(n){i.close.call(i,n)});this.lightbox.next.on("click",function(n){i.next.call(i,n)});this.lightbox.prev.on("click",function(n){i.prev.call(i,n)});jQuery(t).on("resize",function(n){i.resizeContent.call(i,n)});this.lightbox.content.on("touchstart",function(n){i.startTouch.call(i,n,i.lightbox.content)});this.lightbox.content.on("touchend",function(n){i.endTouch.call(i,n,i.lightbox.content)});this.lightbox.content.on("touchmove",function(n){i.moveTouch.call(i,n,i.lightbox.content)})}if(n=="thumbs"){this.lightbox.thumbs.children().on("click",function(n){i.change.call(i,n,this)});this.lightbox.thumbs.children().on("touchend",function(n){i.change.call(i,n,this)});this.lightbox.thumbs.on("touchstart",function(n){i.startTouch.call(i,n,i.lightbox.thumbs)});this.lightbox.thumbs.on("touchend",function(n){i.endTouch.call(i,n,i.lightbox.thumbs)});this.lightbox.thumbs.on("touchmove",function(n){i.moveTouch.call(i,n,i.lightbox.thumbs)})}},deregisterEvents:function(){var n=this;this.lightbox.close.off();this.lightbox.next.off();this.lightbox.prev.off();jQuery(t).off("resize");this.lightbox.content.off();this.lightbox.thumbs.children().off();this.lightbox.thumbs.off()}});n.fn.indexof=function(n){for(var i,t=0;t<jQuery(this).length;t++)jQuery(this).get(t)==n&&(i=t);return i};n.fn.lightboxed=function(t){var r=function(){n.data(this,"plugin_"+o)||n.data(this,"plugin_"+o,new s(jQuery(this),t))},i={};return jQuery(this).filter("[rel]").each(function(){var n=jQuery(this).attr("rel");i.hasOwnProperty(n)?i[n].push(this):i[n]=[this]}),jQuery.each(i,r),jQuery.each(jQuery(this).filter(":not([rel])"),r),this};n.fn.indexOf=function(n){var t=!1,i=jQuery(n)[0].outerHTML;return jQuery(this).each(function(n){if(jQuery(this)[0].outerHTML==i)return t=n,!1}),t};n.fn.lightboxed.defaults={lightboxOpenClass:u+"lightbox_open",lightboxCloseClass:u+"lightbox_close",delay:500,loop:!0,thumbs:{size:50,spacing:10},content:{spacing:10},swipe:{horizontalOffset:.2,verticalOffset:.33}}})(jQuery,window,document);jQuery(window).on("load",function(){jQuery(".lightboxed").lightboxed()});class Gallery{searchPhotos(n,t,i,r,u,f){let e=this.filter(n,t,i,r,u,f);return new Promise(function(n,t){post("/admin/gallery/search",e).then(function(t){return n(t)}).catch(n=>t(n))})}savePhotoToGallery(n,t,i){let r=this.photo(n,t,i);return new Promise(function(n,t){post("/admin/gallery-photos/add",r).then(function(t){return n(t)}).catch(n=>t(n))})}movePhotoInGallery(n,t,i){let r=this.photo(n,t,i);return new Promise(function(n,t){post("/admin/gallery-photos/move",r).then(function(t){return n(t)}).catch(n=>t(n))})}removePhotoInGallery(n,t,i){let r=this.photo(n,t,i);return new Promise(function(n,t){post("/admin/gallery-photos/remove",r).then(function(t){return n(t)}).catch(n=>t(n))})}saveGalleryName(n,t){let i=this.gallery(n,t);return new Promise(function(n,t){post("/admin/gallery/save/name",i).then(function(t){return n(t)}).catch(n=>t(n))})}saveNewGallery(n){let t=this.gallery(0,n);return new Promise(function(n,i){post("/admin/gallery/new/save",t).then(function(t){return n(t)}).catch(n=>i(n))})}deleteGallery(n){return new Promise(function(t,i){deletion("/admin/gallery/delete/"+n).then(function(n){return t(n)}).catch(n=>i(n))})}photo(n,t,i){return{galleryId:n,photoId:t,order:i}}gallery(n,t){return{id:n,name:t}}filter(n,t,i,r,u,f){return{title:n,countryId:parseInt(t),categoryId:parseInt(i),paletteId:parseInt(r),pageIndex:parseInt(u),pageSize:parseInt(f)}}}class Photo{getPhotos(n){let t={pageSize:n.pageSize,pageIndex:n.pageIndex,sortField:n.sortField===undefined?"":n.sortField,sortOrder:n.sortOrder===undefined?"":n.sortOrder,title:n.title,countryId:n.country.id,categoryId:n.category.id,paletteId:n.palette.id,aperturValue:n.aperturValue,camera:n.camera,dateTaken:n.dateTaken,exposureTime:n.exposureTime,fileName:n.fileName,focalLength:n.focalLength,id:n.id===undefined?0:n.id,iso:n.iso===undefined?0:n.iso,lens:n.lens};return new Promise(function(n,i){post("/admin/photo/catalog",t).then(function(t){return n(t)}).catch(n=>i(n))})}savePhotoDetails(n,t,i,r,u){const f={id:n,title:t,countryId:i,categoryId:r,paletteId:u};return new Promise(function(n,t){post("/admin/photo/catalog/update-photo",f).then(function(t){return n(t)}).catch(n=>t(n))})}addPhotoToGallerys(n){return new Promise(function(t,i){post("/favourites/add-photo/"+n).then(function(n){return t(n)}).catch(n=>i(n))})}deletePhotoFromGallerys(n){return new Promise(function(t,i){deletion("/favourites/delete-photo/"+n).then(function(n){return t(n)}).catch(n=>i(n))})}importPhotos(n){return new Promise(function(t,i){post("/admin/photo/import",n).then(function(n){return t(n)}).catch(n=>i(n))})}updateCataloguePhoto(n){return new Promise(function(t,i){post("/admin/photo/catalog/update-photo",n).then(function(n){return t(n)}).catch(n=>i(n))})}}class LookUp{getPhotoCatalogueLookups(){return new Promise(function(n,t){get("/admin/lookup/photo-catalogue").then(function(t){return n(t)}).catch(n=>t(n))})}}$(document).on("click",".photo-modal-close, .photo-modal-close-small",function(){$("#photo-modal").modal("hide")});document.addEventListener("DOMContentLoaded",function(){stopClickEventPropagation(".dropdown-menu")});const gallery=new Gallery;let navMenuListItem=$("nav ul li"),newGalleryName=$("#new-gallery-name"),newGalleryAlerts=$("#new-gallery-alert");$(function(){selectMenuItem()});$(".sidebar ul li a").click(function(){var n=$(this).attr("id");navMenuListItem.find("ul.item-show-"+n).toggleClass("show");navMenuListItem.find("#"+n+" span").toggleClass("rotate")});$("nav ul li a").click(function(){navMenuListItem.find("a").removeClass("active");$(this).addClass("active")});$(document).on("click","#new-gallery",function(){newGalleryName.val("");newGalleryAlerts.empty();$("#new-gallery-modal").modal("show")});$(document).on("click","#save-new-gallery",function(){let n=newGalleryName.val();newGalleryAlerts.empty();n!=""&&gallery.saveNewGallery(n).then(function(n){$("#selected-gallery-id").val(n.data.id);window.location=baseUrl+"/admin/gallery/"+n.data.id}).catch(n=>{n.response.data.messages.forEach(function(n){addAlert(n,newGalleryAlerts)})})});document.addEventListener("DOMContentLoaded",function(){stopClickEventPropagation(".dropdown-menu")});const photo=new Photo,lookUp=new LookUp,menuItemIndex=2,subMenuItemIndex=2.2;let countries=[],categories=[],palettes=[],pageSize=10,azureStoragePhotosContainerUrl="",photoCatalogueAlerts=$("#photo-catalogue-alert"),cataloguePhotosGrid=$("#catalog-photos-grid"),photoCatalogueResultsPagination=$("#photo-catalogue-results-pagination");$(function(){setAdminMenuItem(menuItemIndex,subMenuItemIndex);loadLookUps().then(function(){intialisePhotoCatalogGrid()});initialisePhotosCatalogueResultsPagination(1,!1);history.pushState("",document.title,window.location.pathname)});