function get(n){return getRequest(axiosClient.get(n))}function post(n,t){return getRequest(axiosClient.post(n,t))}function deletion(n){return getRequest(axiosClient.delete(n))}function getRequest(n){return n.then(n=>(console.log(n),n)).catch(n=>{console.error(n);throw n;})}function fadeInImages(n){$(n).each(function(){$(this).delay(Math.random()*500+100).fadeTo("slow",1)})}function getAlertClass(n){switch(n){case 0:return"alert-danger";case 1:return"alert-warning";case 2:return"alert-info"}}function addAlert(n,t){$(t).append('<div class="alert '+getAlertClass(n.severity)+'" role="alert">'+n.text+"<\/div >")}function stopClickEventPropagation(n){document.querySelectorAll(n).forEach(function(n){n.addEventListener("click",function(n){n.stopPropagation()})})}function setAdminMenuItem(n,t){const r=$("#selected-gallery-id").val(),i=$("nav ul li");i.find("a").removeClass("active-menu-item");t===0&&(t=n);n===3&&(t="3."+r);$('[data-menu-level-index="'+t+'"] a').addClass("active-menu-item");i.find("ul.item-show-"+n).toggleClass("show");i.find("#"+n+" span").toggleClass("rotate")}function selectMenuItem(){const n=new URLSearchParams(window.location.search).get("menu");n==="galleries"&&$('.menu li a[id="2"]').click()}function hideMenu(){document.getElementById("context-menu").style.display="none"}function rightClick(n){if(n.preventDefault(),callingElement=n.target,document.getElementById("context-menu").style.display=="block")hideMenu();else{var t=document.getElementById("context-menu");t.style.display="block";t.style.left=n.pageX+"px";t.style.top=n.pageY+"px"}}function receiveDroppedTemplate(n,t){updateListItemColumnAttribute($(n.target),t);updateListItemOrderAttribute($(n.target))}function updateListItemOrderAttribute(n){let t=1;n.find("li").each(function(){$(this).attr("data-order",t);t++})}function updateListItemColumnAttribute(n,t){let i=n.parent().attr("data-column");$(t.item[0]).attr("data-column",i)}function getMontageTemplateImage(n){switch(n){case 0:return"LandscapeTemplate.jpg";case 1:return"PortraitTemplate.jpg";default:return"SquareTemplate.jpg"}}const baseUrl="https://"+window.location.host,axiosClient=axios.create({baseURL:baseUrl,headers:{RequestVerificationToken:$('input[name="__RequestVerificationToken"]').val()}});class Montage{saveTemplatImageAdd(n,t,i){const r={column:parseInt(n),order:t,orientation:parseInt(i)};return new Promise(function(n,t){post("/admin/montage/add-image",r).then(function(t){return n(t)}).catch(n=>t(n))})}saveTempateImageMove(n,t,i){const r={id:n,column:t,order:i};return new Promise(function(n,t){post("/admin/montage/move-image",r).then(function(t){return n(t)}).catch(n=>t(n))})}deleteTemplateImage(n){return new Promise(function(t,i){deletion("/admin/montage/delete-image/"+n).then(function(n){return t(n)}).catch(n=>i(n))})}}class Gallery{searchPhotos(n,t,i,r,u,f){let e=this.filter(n,t,i,r,u,f);return new Promise(function(n,t){post("/admin/gallery/search",e).then(function(t){return n(t)}).catch(n=>t(n))})}savePhotoToGallery(n,t,i){let r=this.photo(n,t,i);return new Promise(function(n,t){post("/admin/gallery-photos/add",r).then(function(t){return n(t)}).catch(n=>t(n))})}movePhotoInGallery(n,t,i){let r=this.photo(n,t,i);return new Promise(function(n,t){post("/admin/gallery-photos/move",r).then(function(t){return n(t)}).catch(n=>t(n))})}removePhotoInGallery(n,t,i){let r=this.photo(n,t,i);return new Promise(function(n,t){post("/admin/gallery-photos/remove",r).then(function(t){return n(t)}).catch(n=>t(n))})}saveGalleryName(n,t){let i=this.gallery(n,t);return new Promise(function(n,t){post("/admin/gallery/save/name",i).then(function(t){return n(t)}).catch(n=>t(n))})}saveNewGallery(n){let t=this.gallery(0,n);return new Promise(function(n,i){post("/admin/gallery/new/save",t).then(function(t){return n(t)}).catch(n=>i(n))})}deleteGallery(n){return new Promise(function(t,i){deletion("/admin/gallery/delete/"+n).then(function(n){return t(n)}).catch(n=>i(n))})}photo(n,t,i){return{galleryId:n,photoId:t,order:i}}gallery(n,t){return{id:n,name:t}}filter(n,t,i,r,u,f){return{title:n,countryId:parseInt(t),categoryId:parseInt(i),paletteId:parseInt(r),pageIndex:parseInt(u),pageSize:parseInt(f)}}}document.addEventListener("DOMContentLoaded",function(){stopClickEventPropagation(".dropdown-menu")});const gallery=new Gallery;let navMenuListItem=$("nav ul li"),newGalleryName=$("#new-gallery-name"),newGalleryAlerts=$("#new-gallery-alert");$(function(){selectMenuItem()});$(".sidebar ul li a").click(function(){var n=$(this).attr("id");navMenuListItem.find("ul.item-show-"+n).toggleClass("show");navMenuListItem.find("#"+n+" span").toggleClass("rotate")});$("nav ul li a").click(function(){navMenuListItem.find("a").removeClass("active");$(this).addClass("active")});$(document).on("click","#new-gallery",function(){newGalleryName.val("");newGalleryAlerts.empty();$("#new-gallery-modal").modal("show")});$(document).on("click","#save-new-gallery",function(){let n=newGalleryName.val();newGalleryAlerts.empty();n!=""&&gallery.saveNewGallery(n).then(function(n){$("#selected-gallery-id").val(n.data.id);window.location=baseUrl+"/admin/gallery/"+n.data.id}).catch(n=>{n.response.data.messages.forEach(function(n){addAlert(n,newGalleryAlerts)})})});document.addEventListener("DOMContentLoaded",function(){stopClickEventPropagation(".dropdown-menu")});let callingElement,origin=null;const montage=new Montage,menuItemIndex=4,subMenuItemIndex=0;$(function(){document.onclick=hideMenu;setAdminMenuItem(menuItemIndex,subMenuItemIndex);$(".draggable-left").sortable({connectWith:".connected-sortable",stack:".connected-sortable ul",start:function(){origin=$(this)},stop:function(n,t){let i=t.item.index()+1,r=$(t.item[0]),u=$(t.item).closest(".column").attr("data-column"),f=$(r).attr("data-id");montage.saveTempateImageMove(f,u,i).then(function(){updateListItemOrderAttribute(origin)})},receive:receiveDroppedTemplate}).disableSelection()});$(document).on("contextmenu",".image-container img",function(n){rightClick(n)});$("#context-menu ul li").on("click",function(n){n.preventDefault();let i=$(callingElement).closest(".column").attr("data-column"),t=$(callingElement).closest("li").attr("data-order"),r=parseInt($(n.currentTarget).attr("data-id"));t=parseInt(t)+1;montage.saveTemplatImageAdd(i,t,r).then(function(n){let u='<li data-column="'+i+'" data-order="'+t+'" data-id="'+n.data.id+'"><div class="image-container"><img class="child" src="/images/'+getMontageTemplateImage(r)+'"><div class="delete-template"> <i class="bi bi-trash3"><\/i><\/div><\/div><\/li >';$(u).insertAfter("#monatageColumn"+i+"List li:eq("+(t-2)+")");updateListItemOrderAttribute($(callingElement).closest("ul"))})});$("#add-montage-template-image").on("click",function(){let n=$("#montage-column").val(),t=parseInt($("#montage-photo-orientation").val()),i=$("#monatageColumn"+n+" > ul").children("li").length;montage.saveTemplatImageAdd(n,i+1,t).then(function(r){let u='<li data-column="'+n+'" data-order="'+(i+1)+'" data-id="'+r+'"><div class="image-container"><img class="child" src="/images/'+getMontageTemplateImage(t)+'"><div class="delete-template"> <i class="bi bi-trash3"><\/i><\/div><\/div><\/li >';$("#monatageColumn"+n+" ul").append(u)})});$(".connected-sortable").on("click",".delete-template",function(n){n.preventDefault();let i=$(this).closest("ul"),t=$(this).closest("li"),r=$(t).attr("data-id");t.fadeOut("slow",function(){montage.deleteTemplateImage(r).then(function(){t.remove();updateListItemOrderAttribute($(i))})})});