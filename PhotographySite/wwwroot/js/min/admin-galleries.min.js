function get(n){return getRequest(axiosClient.get(n))}function post(n,t){return getRequest(axiosClient.post(n,t))}function deletion(n){return getRequest(axiosClient.delete(n))}function getRequest(n){return n.then(n=>(console.log(n),n)).catch(n=>{console.error(n);throw n;})}function setModal(n,t){$("#photo-modal-label").text(n);$("#imagePreview").attr({src:t});$("#photo-modal").modal("show")}function fadeInImages(n){$(n).each(function(){$(this).delay(Math.random()*500+100).fadeTo("slow",1)})}function getAlertClass(n){switch(n){case 0:return"alert-danger";case 1:return"alert-warning";case 2:return"alert-info"}}function addAlert(n,t){$(t).append('<div class="alert '+getAlertClass(n.severity)+'" role="alert">'+n.text+"<\/div >")}function stopClickEventPropagation(n){document.querySelectorAll(n).forEach(function(n){n.addEventListener("click",function(n){n.stopPropagation()})})}function setAdminMenuItem(n,t){const r=$("#selected-gallery-id").val(),i=$("nav ul li");i.find("a").removeClass("active-menu-item");t===0&&(t=n);n===3&&(t="3."+r);$('[data-menu-level-index="'+t+'"] a').addClass("active-menu-item");i.find("ul.item-show-"+n).toggleClass("show");i.find("#"+n+" span").toggleClass("rotate")}function selectMenuItem(){const n=new URLSearchParams(window.location.search).get("menu");n==="galleries"&&$('.menu li a[id="2"]').click()}function initialiseDropDowns(){$("#search-country-select").prepend(dropdownDefaultItem("Country"));$("#search-category-select").prepend(dropdownDefaultItem("Category"));$("#search-palette-select").prepend(dropdownDefaultItem("Palette"))}function dropdownDefaultItem(n){return"<option value='0' selected='selected'>Select "+n+"...<\/option>"}function initialiseGallerySearchPhotosResultsPagination(n,t){gallerySearchPhotosResultsPagination.pagination({items:n,itemsOnPage:pageSize,cssStyle:"dark-theme",onPageClick:function(n){searchPhotosForGallery(n)}});showPaginationController(t)}function showPaginationController(n){n?gallerySearchPhotosResultsPagination.show():gallerySearchPhotosResultsPagination.hide()}function sortGalleryMenuItems(){var t=$(".menu-galleries-list"),n=$("li",t).get(),i=n[0];n.shift();n.sort(function(n,t){var i=$(n).text().toUpperCase(),r=$(t).text().toUpperCase();return i<r?-1:1});n.splice(0,0,i);$.each(n,function(n,i){t.append(i)})}function searchPhotosForGallery(n){gallerySource.empty();gallerySearchAlerts.empty();let t=parseInt($("#search-country-select").val()),i=parseInt($("#search-category-select").val()),r=parseInt($("#search-palette-select").val()),u=$("#gallery-search-title").val();gallery.searchPhotos(u,t,i,r,n,pageSize).then(function(t){azureStoragePhotosContainerUrl=t.data.azureStoragePhotosContainerUrl;gallerySource.append(getPhotoElements(t.data.photos));initialiseGallerySearchPhotosResultsPagination(t.data.numberOfPhotos,!0);gallerySearchPhotosResultsPagination.pagination("drawPage",n)}).catch(n=>{n.response.data.messages.forEach(function(n){addAlert(n,gallerySearchAlerts)})})}function getPhotoElements(n){let t="";return n.forEach(function(n){photoInGallery(n.id)||(t=t+getLiImageElement(n))}),t}function initialiseDragAndDrop(){let n="",t="";$("#gallery-source, #gallery-destination").sortable({helper:"clone",opacity:.5,cursor:"crosshair",connectWith:".list",receive:function(n){t==""&&(t=n.target.id)},start:function(){n="";t=""},update:function(t){n==""&&(n=t.target.id)},stop:function(i,r){dropPhoto(r,n,t)}});$("#gallery-source, #gallery-destination").disableSelection()}function dropPhoto(n,t,i){let r=$(n.item[0]).find("img").attr("data-photo-id"),u=$("#selected-gallery-id").val();t==="gallery-source"&&i==="gallery-destination"?movePhotoFromSourceToGallery(n.item,u,r):t==="gallery-destination"&&i===""?movePhotoFromGalleryToGallery(n.item,u,r):t==="gallery-destination"&&i==="gallery-source"&&movePhotoFromGalleryToSource(n.item,u,r)}function movePhotoFromSourceToGallery(n,t,i){var r=$(n).prevAll().length+1;gallery.savePhotoToGallery(t,i,r).then(function(){updateOrderOfPhotos(n,r)}).catch(n=>{addAlert(n,"#gallery-alert")})}function movePhotoFromGalleryToGallery(n,t,i){var r=$(n).prevAll().length+1;gallery.movePhotoInGallery(t,i,r).then(function(){updateOrderOfPhotos(n)}).catch(n=>{addAlert(n,"#gallery-alert")})}function movePhotoFromGalleryToSource(n,t,i){var r=$(n).prevAll().length;gallery.removePhotoInGallery(t,i,r).then(function(){updateOrderOfPhotos(n)}).catch(n=>{addAlert(n,"#gallery-alert")})}function updateOrderOfPhotos(n){let t=1,i=$(n).parent().children();i.each(function(n,i){$(i).find("img").attr("data-photo-order",t);t++})}function getLiImageElement(n){return"<li><img data-photo-id='"+n.id+"' data-title='"+n.title+"' class='draggable-img gallery-thumbnail' src='"+azureStoragePhotosContainerUrl+n.fileName+"' /><\/li>"}function photoInGallery(n){let t=!1;return $("#gallery-destination li img").each(function(i,r){let u=parseInt($(r).attr("data-photo-id"));if(u===n){t=!0;return}}),t}(function(n){var t={init:function(i){var r=n.extend({items:1,itemsOnPage:1,pages:0,displayedPages:5,edges:2,currentPage:0,useAnchors:!0,hrefTextPrefix:"#page-",hrefTextSuffix:"",prevText:"Prev",nextText:"Next",ellipseText:"&hellip;",ellipsePageSet:!0,cssStyle:"light-theme",listStyle:"",labelMap:[],selectOnClick:!0,nextAtFront:!1,invertPageOrder:!1,useStartEdge:!0,useEndEdge:!0,onPageClick:function(){},onInit:function(){}},i||{}),u=this;return r.pages=r.pages?r.pages:Math.ceil(r.items/r.itemsOnPage)?Math.ceil(r.items/r.itemsOnPage):1,r.currentPage=r.currentPage?r.currentPage-1:r.invertPageOrder?r.pages-1:0,r.halfDisplayed=r.displayedPages/2,this.each(function(){u.addClass(r.cssStyle+" simple-pagination").data("pagination",r);t._draw.call(u)}),r.onInit(),this},selectPage:function(n){return t._selectPage.call(this,n-1),this},prevPage:function(){var n=this.data("pagination");return n.invertPageOrder?n.currentPage<n.pages-1&&t._selectPage.call(this,n.currentPage+1):n.currentPage>0&&t._selectPage.call(this,n.currentPage-1),this},nextPage:function(){var n=this.data("pagination");return n.invertPageOrder?n.currentPage>0&&t._selectPage.call(this,n.currentPage-1):n.currentPage<n.pages-1&&t._selectPage.call(this,n.currentPage+1),this},getPagesCount:function(){return this.data("pagination").pages},setPagesCount:function(n){this.data("pagination").pages=n},getCurrentPage:function(){return this.data("pagination").currentPage+1},destroy:function(){return this.empty(),this},drawPage:function(n){var i=this.data("pagination");return i.currentPage=n-1,this.data("pagination",i),t._draw.call(this),this},redraw:function(){return t._draw.call(this),this},disable:function(){var n=this.data("pagination");return n.disabled=!0,this.data("pagination",n),t._draw.call(this),this},enable:function(){var n=this.data("pagination");return n.disabled=!1,this.data("pagination",n),t._draw.call(this),this},updateItems:function(n){var i=this.data("pagination");i.items=n;i.pages=t._getPages(i);this.data("pagination",i);t._draw.call(this)},updateItemsOnPage:function(n){var i=this.data("pagination");return i.itemsOnPage=n,i.pages=t._getPages(i),this.data("pagination",i),t._selectPage.call(this,0),this},getItemsOnPage:function(){return this.data("pagination").itemsOnPage},_draw:function(){var i=this.data("pagination"),r=t._getInterval(i),u,s,f,o,e;if(t.destroy.call(this),s=typeof this.prop=="function"?this.prop("tagName"):this.attr("tagName"),f=s==="UL"?this:n("<ul"+(i.listStyle?' class="'+i.listStyle+'"':"")+"><\/ul>").appendTo(this),i.prevText&&t._appendItem.call(this,i.invertPageOrder?i.currentPage+1:i.currentPage-1,{text:i.prevText,classes:"prev"}),i.nextText&&i.nextAtFront&&t._appendItem.call(this,i.invertPageOrder?i.currentPage-1:i.currentPage+1,{text:i.nextText,classes:"next"}),i.invertPageOrder){if(r.end<i.pages&&i.edges>0){if(i.useStartEdge)for(o=Math.max(i.pages-i.edges,r.end),u=i.pages-1;u>=o;u--)t._appendItem.call(this,u);i.pages-i.edges>r.end&&i.pages-i.edges-r.end!=1?f.append('<li class="disabled"><span class="ellipse">'+i.ellipseText+"<\/span><\/li>"):i.pages-i.edges-r.end==1&&t._appendItem.call(this,r.end)}}else if(r.start>0&&i.edges>0){if(i.useStartEdge)for(e=Math.min(i.edges,r.start),u=0;u<e;u++)t._appendItem.call(this,u);i.edges<r.start&&r.start-i.edges!=1?f.append('<li class="disabled"><span class="ellipse">'+i.ellipseText+"<\/span><\/li>"):r.start-i.edges==1&&t._appendItem.call(this,i.edges)}if(i.invertPageOrder)for(u=r.end-1;u>=r.start;u--)t._appendItem.call(this,u);else for(u=r.start;u<r.end;u++)t._appendItem.call(this,u);if(i.invertPageOrder){if(r.start>0&&i.edges>0&&(i.edges<r.start&&r.start-i.edges!=1?f.append('<li class="disabled"><span class="ellipse">'+i.ellipseText+"<\/span><\/li>"):r.start-i.edges==1&&t._appendItem.call(this,i.edges),i.useEndEdge))for(e=Math.min(i.edges,r.start),u=e-1;u>=0;u--)t._appendItem.call(this,u)}else if(r.end<i.pages&&i.edges>0&&(i.pages-i.edges>r.end&&i.pages-i.edges-r.end!=1?f.append('<li class="disabled"><span class="ellipse">'+i.ellipseText+"<\/span><\/li>"):i.pages-i.edges-r.end==1&&t._appendItem.call(this,r.end),i.useEndEdge))for(o=Math.max(i.pages-i.edges,r.end),u=o;u<i.pages;u++)t._appendItem.call(this,u);i.nextText&&!i.nextAtFront&&t._appendItem.call(this,i.invertPageOrder?i.currentPage-1:i.currentPage+1,{text:i.nextText,classes:"next"});i.ellipsePageSet&&!i.disabled&&t._ellipseClick.call(this,f)},_getPages:function(n){var t=Math.ceil(n.items/n.itemsOnPage);return t||1},_getInterval:function(n){return{start:Math.ceil(n.currentPage>n.halfDisplayed?Math.max(Math.min(n.currentPage-n.halfDisplayed,n.pages-n.displayedPages),0):0),end:Math.ceil(n.currentPage>n.halfDisplayed?Math.min(n.currentPage+n.halfDisplayed,n.pages):Math.min(n.displayedPages,n.pages))}},_appendItem:function(i,r){var s=this,u,e,f=s.data("pagination"),o=n("<li><\/li>"),h=s.find("ul");i=i<0?0:i<f.pages?i:f.pages-1;u={text:i+1,classes:""};f.labelMap.length&&f.labelMap[i]&&(u.text=f.labelMap[i]);u=n.extend(u,r||{});i==f.currentPage||f.disabled?(f.disabled||u.classes==="prev"||u.classes==="next"?o.addClass("disabled"):o.addClass("active"),e=n('<span class="current">'+u.text+"<\/span>")):(e=f.useAnchors?n('<a href="'+f.hrefTextPrefix+(i+1)+f.hrefTextSuffix+'" class="page-link">'+u.text+"<\/a>"):n("<span >"+u.text+"<\/span>"),e.click(function(n){return t._selectPage.call(s,i,n)}));u.classes&&e.addClass(u.classes);o.append(e);h.length?h.append(o):s.append(o)},_selectPage:function(n,i){var r=this.data("pagination");r.currentPage=n;r.selectOnClick&&t._draw.call(this);return r.onPageClick(n+1,i)},_ellipseClick:function(i){var f=this,r=this.data("pagination"),u=i.find(".ellipse");u.addClass("clickable").parent().removeClass("disabled");u.click(function(){if(!r.disable){var i=n(this),e=(parseInt(i.parent().prev().text(),10)||0)+1;i.html('<input type="number" min="1" max="'+r.pages+'" step="1" value="'+e+'">').find("input").focus().click(function(n){n.stopPropagation()}).keyup(function(i){var e=n(this).val();i.which===13&&e!==""?e>0&&e<=r.pages&&t._selectPage.call(f,e-1):i.which===27&&u.empty().html(r.ellipseText)}).bind("blur",function(){var i=n(this).val();return i!==""&&t._selectPage.call(f,i-1),u.empty().html(r.ellipseText),!1})}return!1})}};n.fn.pagination=function(i){if(t[i]&&i.charAt(0)!="_")return t[i].apply(this,Array.prototype.slice.call(arguments,1));if(typeof i!="object"&&i)n.error("Method "+i+" does not exist on jQuery.pagination");else return t.init.apply(this,arguments)}})(jQuery);const baseUrl="https://"+window.location.host,axiosClient=axios.create({baseURL:baseUrl,headers:{RequestVerificationToken:$('input[name="__RequestVerificationToken"]').val()}});class Gallery{searchPhotos(n,t,i,r,u,f){let e=this.filter(n,t,i,r,u,f);return new Promise(function(n,t){post("/admin/gallery/search",e).then(function(t){return n(t)}).catch(n=>t(n))})}savePhotoToGallery(n,t,i){let r=this.photo(n,t,i);return new Promise(function(n,t){post("/admin/gallery-photos/add",r).then(function(t){return n(t)}).catch(n=>t(n))})}movePhotoInGallery(n,t,i){let r=this.photo(n,t,i);return new Promise(function(n,t){post("/admin/gallery-photos/move",r).then(function(t){return n(t)}).catch(n=>t(n))})}removePhotoInGallery(n,t,i){let r=this.photo(n,t,i);return new Promise(function(n,t){post("/admin/gallery-photos/remove",r).then(function(t){return n(t)}).catch(n=>t(n))})}saveGalleryName(n,t){let i=this.gallery(n,t);return new Promise(function(n,t){post("/admin/gallery/save/name",i).then(function(t){return n(t)}).catch(n=>t(n))})}saveNewGallery(n){let t=this.gallery(0,n);return new Promise(function(n,i){post("/admin/gallery/new/save",t).then(function(t){return n(t)}).catch(n=>i(n))})}deleteGallery(n){return new Promise(function(t,i){deletion("/admin/gallery/delete/"+n).then(function(n){return t(n)}).catch(n=>i(n))})}photo(n,t,i){return{galleryId:n,photoId:t,order:i}}gallery(n,t){return{id:n,name:t}}filter(n,t,i,r,u,f){return{title:n,countryId:parseInt(t),categoryId:parseInt(i),paletteId:parseInt(r),pageIndex:parseInt(u),pageSize:parseInt(f)}}}$(document).on("click",".photo-modal-close, .photo-modal-close-small",function(){$("#photo-modal").modal("hide")});document.addEventListener("DOMContentLoaded",function(){stopClickEventPropagation(".dropdown-menu")});const gallery=new Gallery;let navMenuListItem=$("nav ul li"),newGalleryName=$("#new-gallery-name"),newGalleryAlerts=$("#new-gallery-alert");$(function(){selectMenuItem()});$(".sidebar ul li a").click(function(){var n=$(this).attr("id");navMenuListItem.find("ul.item-show-"+n).toggleClass("show");navMenuListItem.find("#"+n+" span").toggleClass("rotate")});$("nav ul li a").click(function(){navMenuListItem.find("a").removeClass("active");$(this).addClass("active")});$(document).on("click","#new-gallery",function(){newGalleryName.val("");newGalleryAlerts.empty();$("#new-gallery-modal").modal("show")});$(document).on("click","#save-new-gallery",function(){let n=newGalleryName.val();newGalleryAlerts.empty();n!=""&&gallery.saveNewGallery(n).then(function(n){$("#selected-gallery-id").val(n.data.id);window.location=baseUrl+"/admin/gallery/"+n.data.id}).catch(n=>{n.response.data.messages.forEach(function(n){addAlert(n,newGalleryAlerts)})})});document.addEventListener("DOMContentLoaded",function(){stopClickEventPropagation(".dropdown-menu")});const menuItemIndex=3;let pageSize=20,azureStoragePhotosContainerUrl="",gallerySearchAlerts=$("#gallery-search-alerts"),galleryModalAlerts=$("#gallery-modal-alerts"),editGalleryName=$("#edit-gallery-name"),deleteGalleryModal=$("#delete-gallery-modal"),deleteGalleryAlerts=$("#delete-gallery-alerts"),editGalleryNameModal=$("#edit-gallery-name-modal"),gallerySearchPhotosResultsPagination=$("#gallery-search-photos-results-pagination"),gallerySource=$("#gallery-source");$(function(){gallerySearchAlerts.empty();galleryModalAlerts.empty();initialiseDropDowns();setAdminMenuItem(menuItemIndex);initialiseDragAndDrop();initialiseGallerySearchPhotosResultsPagination(1,!1);history.pushState("",document.title,window.location.pathname)});$(document).on("click",".gallery-thumbnail",function(){$("#photo-modal-label").text($(this).attr("data-title"));$("#imagePreview").attr({src:$(this).attr("src")});$("#photo-modal").modal("show")});$(document).on("click",".edit-gallery-name",function(){editGalleryName.val("");galleryModalAlerts.empty();editGalleryNameModal.modal("show")});$(document).on("click",".delete-gallery",function(){deleteGalleryModal.modal("show")});$(document).on("click","#delete-gallery",function(){let n=$("#selected-gallery-id").val();gallery.deleteGallery(n).then(function(){deleteGalleryModal.modal("hide");window.location=baseUrl+"/admin?menu=galleries"}).catch(n=>{n.response.data.messages.forEach(function(n){addAlert(n,deleteGalleryAlerts)})})});$(document).on("click","#save-gallery-name",function(){let t=$("#selected-gallery-id").val(),n=editGalleryName.val();n!=""&&gallery.saveGalleryName(t,n).then(function(){$('li[data-gallary-menu-id="'+t+'"]').find("a").text(n);$("#galley-name-title").text("Gallery ("+n+")");editGalleryName.val("");editGalleryNameModal.modal("hide");sortGalleryMenuItems()}).catch(n=>{n.response.data.messages.forEach(function(n){addAlert(n,galleryModalAlerts)})})});$(document).on("click",".gallery-search-photos-search-button",function(){gallerySearchPhotosResultsPagination.hide();searchPhotosForGallery(1)});