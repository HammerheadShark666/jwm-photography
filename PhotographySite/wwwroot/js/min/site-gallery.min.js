function i(n){$(n).each(function(){$(this).delay(Math.random()*500+100).fadeTo("slow",1)})}function h(n){switch(n){case 0:return"alert-danger";case 1:return"alert-warning";case 2:return"alert-info"}}function c(n,t){$(t).append('<div class="alert '+h(n.severity)+'" role="alert">'+n.text+"<\/div >")}function r(n){document.querySelectorAll(n).forEach(function(n){n.addEventListener("click",function(n){n.stopPropagation()})})}function a(){var n=$("#user-galleries"),t=$("li",n).get(),r=t[0],i;t.shift();i=s(t);i.splice(0,0,r);n=u(n,i)}function v(){var n=$(".site-galleries"),t=$("li.site-gallery-menu-item",n),i=$("li.user-gallery-menu-item",n),r=$("li.seperator",n),f=s(i),n=u(n,t);n.append(r);n=u(n,f)}function s(n){return n.sort(function(n,t){var i=$(n).text().trim().toUpperCase(),r=$(t).text().trim().toUpperCase();return i<r?-1:1}),n}function u(n,t){return $.each(t,function(t,i){n.append(i)}),n}(function(n,t,i,r){function s(t,i){jQuery.extend(this,{Obj:t,_name:o,_defaults:n.fn.lightboxed.defaults,options:jQuery.extend({},n.fn.lightboxed.defaults,i),uniq:"id"+(new Date).getTime(),lightbox:{},cache:{},index:!1,touch:{},phantoms:{left:!1,right:!1}});this.init()}function f(n){return{clientX:/touch/.test(n.type)?(n.originalEvent||n).changedTouches[0].clientX:n.clientX,clientY:/touch/.test(n.type)?(n.originalEvent||n).changedTouches[0].clientY:n.clientY,pageX:/touch/.test(n.type)?(n.originalEvent||n).changedTouches[0].pageX:n.pageX,pageY:/touch/.test(n.type)?(n.originalEvent||n).changedTouches[0].pageY:n.pageY,timestamp:Date.now()}}function e(n){n=n||t.event;n.preventDefault&&n.preventDefault();n.returnValue=!1}function h(n){if({37:1,38:1,39:1,40:1}[n.keyCode])return e(n),!1}function c(){t.addEventListener&&t.addEventListener("DOMMouseScroll",e,!1);t.onwheel=e;t.onmousewheel=i.onmousewheel=e;t.ontouchmove=e;i.onkeydown=h}function l(){t.removeEventListener&&t.removeEventListener("DOMMouseScroll",e,!1);t.onmousewheel=i.onmousewheel=null;t.onwheel=null;t.ontouchmove=null;i.onkeydown=null}var o="Lightboxed",u="lightboxed--";n.extend(s.prototype,{init:function(){var n=this;this.CacheObj=jQuery(i).find("#"+u+"cache").length>0?jQuery(i).find("#"+u+"cache"):jQuery('<div id="'+u+'cache" />').appendTo("body");this.cache.container=jQuery('<div id="'+this.uniq+'" />').appendTo(this.CacheObj);this.cache.content=jQuery('<div class="'+u+'cached_content" />').appendTo(this.cache.container);this.Obj.length>1&&(this.cache.thumbs=jQuery('<div class="'+u+'cached_thumbs" />').appendTo(this.cache.container));this.Obj.each(function(){n.addToCache(this)});this.lightbox.container=jQuery(i).find("#"+u+"container").length>0?jQuery(i).find("#"+u+"container"):jQuery('<div id="'+u+'container" />').addClass(this.options.lightboxCloseClass).appendTo("body");this.lightbox.stage=this.lightbox.container.find("#"+u+"stage").length>0?this.lightbox.container.find("#"+u+"stage"):jQuery('<div id="'+u+'stage" />').appendTo(this.lightbox.container);this.lightbox.content=this.lightbox.stage.find("#"+u+"content").length>0?this.lightbox.stage.find("#"+u+"content"):jQuery('<div id="'+u+'content" />').appendTo(this.lightbox.stage);this.lightbox.thumbs=this.lightbox.container.find("#"+u+"thumbs").length>0?this.lightbox.container.find("#"+u+"thumbs"):jQuery('<div id="'+u+'thumbs" />').appendTo(this.lightbox.stage);this.lightbox.close=this.lightbox.container.find("#"+u+"bttn_close").length>0?this.lightbox.container.find("#"+u+"bttn_close"):jQuery('<div id="'+u+'bttn_close" />').appendTo(this.lightbox.container);this.lightbox.prev=this.lightbox.container.find("#"+u+"bttn_prev").length>0?this.lightbox.container.find("#"+u+"bttn_prev"):jQuery('<div id="'+u+'bttn_prev" />').appendTo(this.lightbox.container);this.lightbox.next=this.lightbox.container.find("#"+u+"bttn_next").length>0?this.lightbox.container.find("#"+u+"bttn_next"):jQuery('<div id="'+u+'bttn_next" />').appendTo(this.lightbox.container);this.registerEvents("init")},addToCache:function(n){var t;t=(jQuery(n).attr("data-link")||jQuery(n).attr("href")||jQuery(n).attr("data-src")||jQuery(n).attr("src")).match("jpg|gif|png|JPG|GIF|PNG|JPEG|jpeg|svg|SVG|tif|TIF|bmp|BMP")?jQuery("<img />").attr("src",jQuery(n).attr("data-link")||jQuery(n).attr("href")||jQuery(n).attr("src")).attr("alt",jQuery(n).attr("alt")).attr("data-caption",jQuery(n).attr("data-caption")):(jQuery(n).attr("data-link")||jQuery(n).attr("href")).match("^#")&&jQuery(jQuery(n).attr("data-link")||jQuery(n).attr("href")).length>0?jQuery(jQuery(n).attr("data-link")||jQuery(n).attr("href")).html():jQuery("<iframe />").attr("src",jQuery(n).attr("data-link")||jQuery(n).attr("href")).attr("width",jQuery(n).attr("data-width")).attr("height",jQuery(n).attr("data-height")).attr("allowfullscreen","true");jQuery('<div class="'+u+'frame" />').append(t).append(jQuery(n).attr("data-caption")!==r?jQuery('<div class="'+u+'caption" />').html(jQuery(n).attr("data-caption")):"").appendTo(this.cache.content);this.Obj.length>1&&jQuery('<div class="'+u+'thumb" />').append(jQuery('<div class="'+u+'thumb_border" />').append(jQuery("<img />").attr("src",jQuery(n).attr("data-src")||jQuery(n).attr("src")||jQuery(n).attr("data-link")||jQuery(n).attr("href")))).appendTo(this.cache.thumbs)},resizeContent:function(){var n=this;this.lightbox.content.width(jQuery(t).width()*this.lightbox.content.children().length).height(this.cache.thumbs?jQuery(t).height()-this.lightbox.thumbs.height():jQuery(t).height()).children().width(jQuery(t).width()-2*this.options.content.spacing).height(this.lightbox.content.height());this.lightbox.content.children().each(function(i){jQuery(this).css("left",jQuery(t).width()*i+n.options.content.spacing)})},open:function(n,t){var i=this;this.cache.thumbs&&this.options.thumbs!==!1&&(this.lightbox.thumbs.width((this.options.thumbs.size+this.options.thumbs.spacing)*this.cache.thumbs.children().length).height(this.options.thumbs.size+2*this.options.thumbs.spacing).html(this.cache.thumbs.clone(!0).html()).show().children().width(this.options.thumbs.size).height(this.options.thumbs.size).css("margin",this.options.thumbs.spacing+"px "+this.options.thumbs.spacing/2+"px"),this.registerEvents("thumbs"),this.lightbox.next.show(),this.lightbox.prev.show());this.lightbox.content.html(this.cache.content.clone(!0).html());this.lightbox.content.children().length>1&&this.options.loop==!0&&(this.phantoms={left:jQuery(this.lightbox.content.children().get(this.lightbox.content.children().length-1)).clone().addClass(u+"phantom-left").prependTo(this.lightbox.content),right:jQuery(this.lightbox.content.children().get(1)).clone().addClass(u+"phantom-right").appendTo(this.lightbox.content)});this.resizeContent();this.change(n,this.Obj.index(t));this.registerEvents("lightbox");this.lightbox.container.toggleClass(this.options.lightboxCloseClass+" "+this.options.lightboxOpenClass).fadeIn(this.options.delay);c()},close:function(){var n=this;this.deregisterEvents();this.lightbox.container.toggleClass(this.options.lightboxCloseClass+" "+this.options.lightboxOpenClass).fadeOut(this.options.delay,function(){n.lightbox.container.attr("style","");n.lightbox.content.html("").attr("style","");n.lightbox.thumbs.html("").attr("style","").hide();n.lightbox.next.hide();n.lightbox.prev.hide();n.index=!1;l()})},change:function(n,i){var e=this,r=typeof i=="number"?i:jQuery(i).index(),f;this.lightbox.content.children().length>1&&(f=this.options.loop===!0?jQuery(t).width()*-(r+1):jQuery(t).width()*-r,this.lightbox.content.css({"-webkit-transform":"translate("+f+"px,0)","-moz-transform":"translate("+f+"px,0)","-ms-transform":"translate("+f+"px,0)","-o-transform":"translate("+f+"px,0)",transform:"translate("+f+"px,0)",transition:this.options.delay+"ms transform"}),r==-1?(r=this.lightbox.content.children().length-3,setTimeout(function(){var n=jQuery(t).width()*-(r+1);e.lightbox.content.css({"-webkit-transform":"translate("+n+"px,0)","-moz-transform":"translate("+n+"px,0)","-ms-transform":"translate("+n+"px,0)","-o-transform":"translate("+n+"px,0)",transform:"translate("+n+"px,0)",transition:"none"})},this.options.delay)):r==this.lightbox.content.children().length-2?(r=0,setTimeout(function(){var n=jQuery(t).width()*-(r+1);e.lightbox.content.css({"-webkit-transform":"translate("+n+"px,0)","-moz-transform":"translate("+n+"px,0)","-ms-transform":"translate("+n+"px,0)","-o-transform":"translate("+n+"px,0)",transform:"translate("+n+"px,0)",transition:"none"})},this.options.delay)):setTimeout(function(){e.lightbox.content.css("transition","none")},this.options.delay),this.lightbox.content.children().removeClass(u+"active"),jQuery(this.lightbox.content.children().get(r+1)).addClass(u+"active"),this.lightbox.thumbs.children().removeClass(u+"active"),jQuery(this.lightbox.thumbs.children().get(r)).addClass(u+"active"),this.lightbox.thumbs.width()>jQuery(t).width()&&(f=-(r*(this.options.thumbs.size+this.options.thumbs.spacing))-(this.options.thumbs.size+this.options.thumbs.spacing)/2,this.lightbox.thumbs.css({"-webkit-transform":"translate("+f+"px,0)","-moz-transform":"translate("+f+"px,0)","-ms-transform":"translate("+f+"px,0)","-o-transform":"translate("+f+"px,0)",transform:"translate("+f+"px,0)",transition:this.options.delay+"ms transform"})));this.index=r},next:function(n){var t=this;this.change(n,this.index+1)},prev:function(n){var t=this;this.change(n,t.index-1)},startTouch:function(n,t){var i=this;n.preventDefault();this.touch={start:f(n),target:{x:parseFloat(t.css("transform").split(",")[4]),y:parseFloat(t.css("transform").split(",")[5])}}},endTouch:function(n,i){var u=this,r;n.preventDefault();r={clientX:f(n).clientX-this.touch.start.clientX,clientY:f(n).clientY-this.touch.start.clientY,pageX:f(n).pageX-this.touch.start.pageX,pageY:f(n).pageY-this.touch.start.pageY,timestamp:f(n).timestamp-this.touch.start.timestamp};i==this.lightbox.content&&((r.clientX>0?r.clientX:-r.clientX)>jQuery(t).width()*this.options.swipe.horizontalOffset?r.clientX>0?this.prev(n):this.next(n):(this.lightbox.content.css({"-webkit-transform":"translate("+this.touch.target.x+"px,0)","-moz-transform":"translate("+this.touch.target.x+"px,0)","-ms-transform":"translate("+this.touch.target.x+"px,0)","-o-transform":"translate("+this.touch.target.x+"px,0)",transform:"translate("+this.touch.target.x+"px,0)",transition:this.options.delay+"ms transform"}),setTimeout(function(){u.lightbox.content.css("transition","none")},this.options.delay)),(r.clientY>0?r.clientY:-r.clientY)>jQuery(t).height()*this.options.swipe.verticalOffset?this.close(n):(this.lightbox.container.css({"-webkit-transform":"translate(0,0) scale(1)","-moz-transform":"translate(0,0) scale(1)","-ms-transform":"translate(0,0) scale(1)","-o-transform":"translate(0,0) scale(1)",transform:"translate(0,0) scale(1)",opacity:"1",transition:this.options.delay+"ms all"}),setTimeout(function(){u.lightbox.container.attr("style","display: block;")},this.options.delay)))},moveTouch:function(n,i){var s=this,r,e,o,u;n.preventDefault();r={clientX:f(n).clientX-this.touch.start.clientX,clientY:f(n).clientY-this.touch.start.clientY,pageX:f(n).pageX-this.touch.start.pageX,pageY:f(n).pageY-this.touch.start.pageY,timestamp:f(n).timestamp-this.touch.start.timestamp};i==this.lightbox.content&&(r.clientX>0?r.clientX:-r.clientX)>10&&(e=this.touch.target.x+r.clientX,i.css({"-webkit-transform":"translate("+e+"px,0)","-moz-transform":"translate("+e+"px,0)","-ms-transform":"translate("+e+"px,0)","-o-transform":"translate("+e+"px,0)",transform:"translate("+e+"px,0)"}));i==this.lightbox.content&&(r.clientY>0?r.clientY:-r.clientY)>30&&(o=0+r.clientY,u=(jQuery(t).height()-(r.clientY>0?r.clientY:-r.clientY))/jQuery(t).height(),this.lightbox.container.css({"-webkit-transform":"translate(0,"+o+"px) scale("+u+")","-moz-transform":"translate(0,"+o+"px) scale("+u+")","-ms-transform":"translate(0,"+o+"px) scale("+u+")","-o-transform":"translate(0,"+o+"px) scale("+u+")",transform:"translate(0,"+o+"px) scale("+u+")",opacity:u}))},registerEvents:function(n){var i=this;if(n=="init"&&this.Obj.each(function(){jQuery(this).on("click",function(n){n.preventDefault();i.open.call(i,n,this)})}),n=="lightbox"){this.lightbox.close.on("click",function(n){i.close.call(i,n)});this.lightbox.next.on("click",function(n){i.next.call(i,n)});this.lightbox.prev.on("click",function(n){i.prev.call(i,n)});jQuery(t).on("resize",function(n){i.resizeContent.call(i,n)});this.lightbox.content.on("touchstart",function(n){i.startTouch.call(i,n,i.lightbox.content)});this.lightbox.content.on("touchend",function(n){i.endTouch.call(i,n,i.lightbox.content)});this.lightbox.content.on("touchmove",function(n){i.moveTouch.call(i,n,i.lightbox.content)})}if(n=="thumbs"){this.lightbox.thumbs.children().on("click",function(n){i.change.call(i,n,this)});this.lightbox.thumbs.children().on("touchend",function(n){i.change.call(i,n,this)});this.lightbox.thumbs.on("touchstart",function(n){i.startTouch.call(i,n,i.lightbox.thumbs)});this.lightbox.thumbs.on("touchend",function(n){i.endTouch.call(i,n,i.lightbox.thumbs)});this.lightbox.thumbs.on("touchmove",function(n){i.moveTouch.call(i,n,i.lightbox.thumbs)})}},deregisterEvents:function(){var n=this;this.lightbox.close.off();this.lightbox.next.off();this.lightbox.prev.off();jQuery(t).off("resize");this.lightbox.content.off();this.lightbox.thumbs.children().off();this.lightbox.thumbs.off()}});n.fn.indexof=function(n){for(var i,t=0;t<jQuery(this).length;t++)jQuery(this).get(t)==n&&(i=t);return i};n.fn.lightboxed=function(t){var r=function(){n.data(this,"plugin_"+o)||n.data(this,"plugin_"+o,new s(jQuery(this),t))},i={};return jQuery(this).filter("[rel]").each(function(){var n=jQuery(this).attr("rel");i.hasOwnProperty(n)?i[n].push(this):i[n]=[this]}),jQuery.each(i,r),jQuery.each(jQuery(this).filter(":not([rel])"),r),this};n.fn.indexOf=function(n){var t=!1,i=jQuery(n)[0].outerHTML;return jQuery(this).each(function(n){if(jQuery(this)[0].outerHTML==i)return t=n,!1}),t};n.fn.lightboxed.defaults={lightboxOpenClass:u+"lightbox_open",lightboxCloseClass:u+"lightbox_close",delay:500,loop:!0,thumbs:{size:50,spacing:10},content:{spacing:10},swipe:{horizontalOffset:.2,verticalOffset:.33}}})(jQuery,window,document);jQuery(window).on("load",function(){jQuery(".lightboxed").lightboxed()});class f{searchPhotos(n,t,i,r,u,f){let e=this.filter(n,t,i,r,u,f);return new Promise(function(n,t){post("/favourites/search",e).then(function(t){return n(t)}).catch(n=>t(n))})}savePhotoToUserGallery(n,t,i){let r=this.photo(n,t,i);return new Promise(function(n,t){post("/user/gallery-photos/add",r).then(function(t){return n(t)}).catch(n=>t(n))})}movePhotoInUserGallery(n,t,i){let r=this.photo(n,t,i);return new Promise(function(n,t){post("/user/gallery-photos/move",r).then(function(t){return n(t)}).catch(n=>t(n))})}removePhotoInUserGallery(n,t,i){let r=this.photo(n,t,i);return new Promise(function(n,t){post("/user/gallery-photos/remove",r).then(function(t){return n(t)}).catch(n=>t(n))})}saveUserGalleryName(n,t){let i=this.userGallery(n,t),r="/user/gallery/"+(n==0?"add":"update");return new Promise(function(n,t){post(r,i).then(function(t){return n(t)}).catch(n=>t(n))})}saveNewUserGallery(n){let t=this.userGallery(0,n);return new Promise(function(n,i){post("/user/gallery/add",t).then(function(t){return n(t)}).catch(n=>i(n))})}deleteUserGallery(n){return new Promise(function(t,i){deletion("/user/gallery/delete/"+n).then(function(n){return t(n)}).catch(n=>i(n))})}photo(n,t,i){return{userGalleryId:n,photoId:t,order:i}}userGallery(n,t){return{id:n,name:t}}filter(n,t,i,r,u,f){return{title:n,countryId:parseInt(t),categoryId:parseInt(i),paletteId:parseInt(r),pageIndex:parseInt(u),pageSize:parseInt(f)}}}const l=new f;let n=$("#add-user-gallery-name-alerts"),e=$("#new-user-gallery-name"),o=$("#new-user-gallery-modal"),t=$("nav ul li");$(function(){n.empty()});document.addEventListener("DOMContentLoaded",function(){r(".site-galleries");r(".user-galleries");r(".new-gallery-item")});$("#menu-bar li a").click(function(){var n=$(this).attr("id");t.find("ul.item-show-"+n).toggleClass("show");t.find("#"+n+" span").toggleClass("rotate")});t.click(function(){t.removeClass("active");$(this).addClass("active")});$(document).on("click","#new-user-gallery",function(){o.modal("show");e.val("");n.empty()});$(document).on("click","#save-user-new-gallery",function(){let t=e.val();n.empty();t!=""&&l.saveNewUserGallery(t).then(function(n){o.modal("hide");$("#user-galleries").append("<li><a href='/user/gallery/"+n.data.id+"'>"+n.data.name+"<\/a><\/li>");$(".site-galleries").append("<li class='user-gallery-menu-item' data-user-gallary-menu-id='"+n.data.id+"'><a class='dropdown-item' href='/gallery/user/"+n.data.id+"'>"+n.data.name+"<\/a><\/li>");a();v();window.location=baseUrl+"/user/gallery/"+n.data.id}).catch(t=>{t.response.data.messages.forEach(function(t){c(t,n)})})});$(function(){i($("#gallery-images > div > img"));i($(".gallery-image-favourite"));i($("#user-gallery-images > div > img"))});export{f as UserGallery};